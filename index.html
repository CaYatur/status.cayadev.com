<!doctype html>
<!-- 
  CaYaDev Status Page - Uptime Monitoring
  
  Logo files used:
  - assets/CaYaDev.png (current: 288x38px) - main logo, recommended size: 256x256px for better display
  - assets/CaYaDevSite.png (current: 200x200px) - favicon, works well at current size
  
  Replace these files with your actual logos maintaining the same filenames.
-->
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>cayadev.com — Uptime</title>

  <!-- Favicon (sayfa ikonu) -->
  <link rel="icon" type="image/png" href="assets/CaYaDevSite.png">

  <style>
    :root{
      --bg:#071022; --card:#0b1220; --muted:#9ca3af;
      --ok:#16a34a; --bad:#ef4444; --accent:#38bdf8;
      --text-primary:#f8fafc; --text-secondary:#cbd5e1;
      --shadow-sm:0 4px 12px rgba(2,6,23,.3);
      --shadow-lg:0 12px 48px rgba(2,6,23,.7);
      --border-subtle:rgba(255,255,255,0.08);
      color:var(--text-primary); 
      font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,Arial;
    }
    html,body{height:100%;margin:0;background:linear-gradient(180deg,#041126 0%, #071826 70%);}
    .wrap{max-width:1024px;margin:24px auto;padding:0 20px}
    .card{
      background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
      padding:0;border-radius:16px;box-shadow:var(--shadow-lg);
      border:1px solid var(--border-subtle);overflow:hidden;
      backdrop-filter:blur(10px);
    }

    /* Üstte büyük durum bar'ı - daha geniş ve belirgin */
    .status-bar{
      height:88px;
      display:flex;
      align-items:center;
      gap:20px;
      padding:16px 32px;
      color:#071022;
      background:linear-gradient(90deg, rgba(255,255,255,0.08), rgba(255,255,255,0.04));
      transition:all .3s ease;
      border-bottom:1px solid var(--border-subtle);
    }
    .status-bar .text{
      font-weight:800;
      font-size:28px;
      letter-spacing:0.8px;
      text-shadow:0 2px 8px rgba(0,0,0,0.3);
    }
    .status-bar .sub{
      font-size:15px;
      color:rgba(7,17,34,0.9);
      margin-top:6px;
      font-weight:600;
      letter-spacing:0.3px;
    }

    /* Header ile büyük logo */
    header{
      display:flex;
      align-items:center;
      gap:24px;
      padding:32px;
      background:linear-gradient(135deg, rgba(255,255,255,0.02), transparent);
    }
    header img.logo{
      width:112px;
      height:112px;
      object-fit:contain;
      border-radius:12px;
      box-shadow:var(--shadow-sm);
      border:2px solid var(--border-subtle);
      background:rgba(255,255,255,0.05);
      padding:8px;
    }
    .header-content{
      flex:1;
      display:flex;
      flex-direction:column;
      justify-content:center;
    }
    h1{
      font-size:32px;
      margin:0 0 8px 0;
      color:var(--text-primary);
      font-weight:700;
      letter-spacing:-0.5px;
    }
    .header-subtitle{
      color:var(--text-secondary);
      font-size:16px;
      font-weight:500;
      margin:0;
    }
    .muted{color:var(--muted);font-size:14px}
    .content{padding:32px}

    .status-row{
      display:flex;
      align-items:center;
      gap:20px;
      margin-bottom:24px;
      padding:20px;
      background:rgba(255,255,255,0.03);
      border-radius:12px;
      border:1px solid var(--border-subtle);
    }
    .dot{
      width:24px;
      height:24px;
      border-radius:50%;
      background:var(--muted);
      box-shadow:var(--shadow-sm);
      flex-shrink:0;
    }
    .dot.up{
      background:var(--ok);
      box-shadow:0 8px 24px rgba(22,163,74,.2);
    }
    .dot.down{
      background:var(--bad);
      box-shadow:0 8px 24px rgba(239,68,68,.2);
    }
    .status-info{
      flex:1;
    }
    .status-info .status-text{
      font-size:18px;
      font-weight:600;
      margin-bottom:4px;
    }
    .status-info .last-check{
      color:var(--text-secondary);
      font-size:14px;
    }

    .stats{
      display:grid;
      grid-template-columns:repeat(auto-fit, minmax(220px, 1fr));
      gap:20px;
      margin-bottom:32px;
    }
    .stat{
      background:rgba(255,255,255,0.04);
      padding:20px;
      border-radius:12px;
      border:1px solid var(--border-subtle);
      transition:all 0.2s ease;
    }
    .stat:hover{
      background:rgba(255,255,255,0.06);
      transform:translateY(-2px);
      box-shadow:var(--shadow-sm);
    }
    .stat .label{
      color:var(--text-secondary);
      font-size:13px;
      font-weight:600;
      text-transform:uppercase;
      letter-spacing:0.5px;
      margin-bottom:8px;
    }
    .stat .value{
      font-weight:700;
      font-size:24px;
      color:var(--text-primary);
      line-height:1.2;
    }
    
    .history{
      margin-top:0;
      max-height:320px;
      overflow:auto;
      border-radius:12px;
      padding:8px;
      background:rgba(255,255,255,0.02);
      border:1px solid var(--border-subtle);
    }
    .history::-webkit-scrollbar{
      width:8px;
    }
    .history::-webkit-scrollbar-track{
      background:rgba(255,255,255,0.05);
      border-radius:4px;
    }
    .history::-webkit-scrollbar-thumb{
      background:rgba(255,255,255,0.2);
      border-radius:4px;
    }
    .row{
      display:flex;
      justify-content:space-between;
      align-items:center;
      padding:12px 16px;
      border-radius:8px;
      margin-bottom:4px;
      transition:background 0.15s ease;
    }
    .row:nth-child(odd){
      background:rgba(255,255,255,0.02);
    }
    .row:hover{
      background:rgba(255,255,255,0.05);
    }
    .row .time{
      color:var(--text-secondary);
      font-size:13px;
      font-weight:500;
    }
    .row .status{
      font-weight:600;
      font-size:14px;
    }
    
    footer{
      margin-top:20px;
      color:var(--muted);
      font-size:12px;
      text-align:center;
      padding:16px;
      border-top:1px solid var(--border-subtle);
    }
    a{color:var(--accent);text-decoration:none;transition:color 0.2s ease;}
    a:hover{color:#60a5fa;}
    
    /* Mobile responsive */
    @media (max-width:768px){
      .wrap{margin:16px auto;padding:0 16px;}
      .stats{grid-template-columns:1fr;gap:16px;}
      header{
        flex-direction:column;
        align-items:flex-start;
        gap:16px;
        padding:24px;
      }
      header img.logo{
        width:96px;
        height:96px;
        align-self:flex-start;
      }
      .header-content{
        align-self:stretch;
      }
      h1{font-size:24px;}
      .header-subtitle{font-size:15px;}
      .status-bar{
        height:76px;
        padding:12px 20px;
      }
      .status-bar .text{font-size:22px;}
      .status-bar .sub{font-size:14px;}
      .content{padding:24px;}
      .status-row{
        flex-direction:column;
        align-items:flex-start;
        gap:12px;
      }
      .row{
        flex-direction:column;
        align-items:flex-start;
        gap:4px;
      }
    }
    
    @media (max-width:480px){
      header{padding:20px;}
      header img.logo{width:80px;height:80px;}
      h1{font-size:20px;}
      .content{padding:20px;}
      .stats{grid-template-columns:1fr;}
      .stat{padding:16px;}
    }

    /* Yeşil ve kırmızı bar stilleri (durum güncellendiğinde değişecek) */
    .status-ok{ 
      background: linear-gradient(135deg, rgba(22,163,74,0.95), rgba(16,148,71,0.95)); 
      color: #fff; 
      border-bottom-color: rgba(22,163,74,0.3);
    }
    .status-bad{ 
      background: linear-gradient(135deg, rgba(239,68,68,0.95), rgba(220,38,38,0.95)); 
      color: #fff; 
      border-bottom-color: rgba(239,68,68,0.3);
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card" role="main" aria-live="polite">
      <!-- Büyük durum barı: AKTİF / AKTİF DEĞİL -->
      <div id="statusBar" class="status-bar" aria-hidden="false">
        <div>
          <div id="statusBarText" class="text">Henüz kontrol edilmedi</div>
          <div id="statusBarSub" class="sub" style="display:none">cayadev.com erişilebilirliği</div>
        </div>
      </div>

      <header>
        <!-- Logo görüntüsü (CaYaDev.png) -->
        <img src="assets/CaYaDev.png" alt="CaYaDev logo" class="logo" onerror="this.style.display='none'">
        <div class="header-content">
          <h1>cayadev.com</h1>
          <div class="header-subtitle">Canlı erişilebilirlik — yalnızca görüntüleme</div>
        </div>
      </header>

      <div class="content">
        <div class="status-row" aria-hidden="false">
          <div class="dot" id="dot" aria-hidden="true"></div>
          <div class="status-info">
            <div class="status-text" id="stateText"><small class="muted">Henüz kontrol edilmedi</small></div>
            <div class="last-check muted" id="lastChecked"></div>
          </div>
        </div>

        <div class="stats" aria-hidden="false">
          <div class="stat">
            <div class="label">Toplam Kontrol</div>
            <div class="value" id="total">0</div>
          </div>
          <div class="stat">
            <div class="label">Çalışma Oranı</div>
            <div class="value" id="uptime">—</div>
          </div>
          <div class="stat">
            <div class="label">En Son Durum</div>
            <div class="value" id="lastStatus">—</div>
          </div>
          <div class="stat">
            <div class="label">Kayıt Sayısı</div>
            <div class="value" id="saved">0</div>
          </div>
        </div>

        <div class="history" id="historyBox" aria-label="Kontrol geçmişi"></div>

      </div>
      <footer id="footerNote" aria-hidden="true" style="display:none">
        Bu sayfa yalnızca cayadev.com'un erişilebilirliğini gösterir.
      </footer>
    </div>
  </div>

  <script>
    (function(){
      // Sabit ayarlar (kullanıcıya görünmez)
      const TARGET = 'https://cayadev.com';
      const PROXY_BASE = 'https://api.allorigins.win/raw?url='; // proxy (gizli)
      const INTERVAL_SECONDS = 60; // sabit 60s

      // UI elemanları
      const statusBar = document.getElementById('statusBar');
      const statusBarText = document.getElementById('statusBarText');
      const statusBarSub = document.getElementById('statusBarSub');
      const dot = document.getElementById('dot');
      const stateText = document.getElementById('stateText');
      const lastChecked = document.getElementById('lastChecked');
      const totalEl = document.getElementById('total');
      const uptimeEl = document.getElementById('uptime');
      const lastStatusEl = document.getElementById('lastStatus');
      const historyBox = document.getElementById('historyBox');
      const savedEl = document.getElementById('saved');

      const STORAGE_KEY = 'uptime:cayadev:fixed';
      let timer = null;
      let history = loadHistory();

      // Yerel kayıt yükle / kaydet
      function loadHistory(){
        try{ const raw = localStorage.getItem(STORAGE_KEY); return raw ? JSON.parse(raw) : []; } catch(e){ return []; }
      }
      function saveHistory(){ try{ localStorage.setItem(STORAGE_KEY, JSON.stringify(history)); }catch(e){}; savedEl.textContent = history.length; }

      // Kayıt ekle
      function pushRecord(ok, status){
        const rec = { t: new Date().toISOString(), ok: !!ok, status: status || null };
        history.unshift(rec);
        if(history.length>1000) history.length = 1000;
        saveHistory();
        renderHistory();
      }

      // Geçmişi göster (kullanıcılara Türkçe)
      function renderHistory(){
        historyBox.innerHTML = '';
        history.forEach(r=>{
          const div = document.createElement('div');
          div.className = 'row';
          const left = document.createElement('div');
          left.className = 'time';
          left.textContent = new Date(r.t).toLocaleString();
          const right = document.createElement('div');
          right.className = 'status';
          // "AKTİF" / "AKTİF DEĞİL" şeklinde göster
          right.innerHTML = r.ok ? `<span style="color:var(--ok)"><strong>AKTİF</strong> ${r.status?('('+r.status+')'):''}</span>` : `<span style="color:var(--bad)"><strong>AKTİF DEĞİL</strong> ${r.status?('('+r.status+')'):''}</span>`;
          div.appendChild(left); div.appendChild(right);
          historyBox.appendChild(div);
        });
        totalEl.textContent = history.length;
        const ups = history.filter(h=>h.ok).length;
        uptimeEl.textContent = history.length ? Math.round(ups/history.length*100)+'%' : '—';
        lastStatusEl.textContent = history.length ? (history[0].ok ? 'AKTİF' : 'AKTİF DEĞİL') : '—';
      }

      // Genel durum (üstteki büyük bar) güncelle
      function setStatusVisual(ok, status){
        // statusBar'ı yeşil veya kırmızı yap
        if(ok){
          statusBar.classList.remove('status-bad');
          statusBar.classList.add('status-ok');
          statusBarText.textContent = 'AKTİF';
          statusBarSub.style.display = 'block';
          statusBarSub.textContent = 'cayadev.com erişilebilir';
          dot.className = 'dot up';
          stateText.innerHTML = `<strong style="color:var(--ok)">AKTİF</strong> ${status?('('+status+')'):''}`;
        } else {
          statusBar.classList.remove('status-ok');
          statusBar.classList.add('status-bad');
          statusBarText.textContent = 'AKTİF DEĞİL';
          statusBarSub.style.display = 'block';
          statusBarSub.textContent = 'cayadev.com erişilemiyor';
          dot.className = 'dot down';
          stateText.innerHTML = `<strong style="color:var(--bad)">AKTİF DEĞİL</strong> ${status?('('+status+')'):''}`;
        }
        lastChecked.textContent = 'Son kontrol: ' + new Date().toLocaleString();
      }

      function buildUrl(){
        return PROXY_BASE + encodeURIComponent(TARGET);
      }

      // Erişilebilirlik kontrolü: önce HEAD, sonra GET fallback
      async function checkOnce(){
        const url = buildUrl();
        const controller = new AbortController();
        const timeout = setTimeout(()=>controller.abort(), 15000);

        async function tryFetch(method){
          try{
            const res = await fetch(url, { method, cache: 'no-store', signal: controller.signal });
            return { ok: res.ok, status: res.status };
          }catch(err){
            return { ok: false, status: 'err' };
          }
        }

        try{
          const headResult = await tryFetch('HEAD');
          if(headResult.status !== 'err' && typeof headResult.status === 'number'){
            clearTimeout(timeout);
            setStatusVisual(headResult.ok, headResult.status);
            pushRecord(headResult.ok, headResult.status);
            return;
          }
          const getResult = await tryFetch('GET');
          clearTimeout(timeout);
          setStatusVisual(getResult.ok, getResult.status);
          pushRecord(getResult.ok, getResult.status);
        }catch(e){
          clearTimeout(timeout);
          setStatusVisual(false, 'err');
          pushRecord(false, 'err');
        }
      }

      function startMonitoring(){
        if(timer) clearInterval(timer);
        checkOnce(); // hemen kontrol et
        timer = setInterval(checkOnce, INTERVAL_SECONDS * 1000);
      }

      // Başlangıç
      renderHistory();
      savedEl.textContent = history.length;
      window.addEventListener('load', startMonitoring);

      // Sekme gizliyken kontrolü durdur / görünür olunca devam ettir
      document.addEventListener('visibilitychange', ()=>{
        if(document.hidden){
          if(timer){ clearInterval(timer); timer = null; }
        } else {
          startMonitoring();
        }
      });

      // Not: Tüm metinler Türkçe yapıldı, kullanıcıya URL/proxy/aralık görünmüyor.
    })();
  </script>
</body>
</html>